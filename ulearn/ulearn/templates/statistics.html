{% extends 'base.html' %}

{% block content %}
<h1>Общая статистика</h1>

<h2>Динамика уровня зарплат по годам</h2>
<table border="1">
    <tr>
        <th>Год</th>
        <th>Средняя зарплата</th>
    </tr>
    {% for year, salary in avg_salary_by_year.items %}
    <tr>
        <td>{{ year }}</td>
        <td>{{ salary|floatformat:2 }}</td>
    </tr>
    {% endfor %}
</table>

<h2>Динамика количества вакансий по годам</h2>
<table border="1">
    <tr>
        <th>Год</th>
        <th>Количество</th>
    </tr>
    {% for year, count in vacancies_by_years.items %}
    <tr>
        <td>{{ year }}</td>
        <td>{{ count }}</td>
    </tr>
    {% endfor %}
</table>

<h2>Уровень зарплат по городам</h2>
<table border="1">
    <tr>
        <th>Город</th>
        <th>Средняя зарплата</th>
    </tr>
    {% for city, avg in salary_by_city.items %}
    <tr>
        <td>{{ city }}</td>
        <td>{{ avg|floatformat:2 }}</td>
    </tr>
    {% endfor %}
</table>

<h2>Доля вакансий по городам</h2>
<table border="1">
    <tr>
        <th>Город</th>
        <th>Доля (%)</th>
        <th>Количество</th>
    </tr>
    {% for city, percentage in city_percentages.items %}
    <tr>
        <td>{{ city }}</td>
        <td>{{ percentage.per|floatformat:2 }}%</td>
        <td>{{ percentage.count }}</td>
    </tr>
    {% endfor %}
</table>

<h2>ТОП-20 навыков по годам</h2>
{% for year, skills in top_20_skills_by_year.items %}
<h3>{{ year }}</h3>
<ul>
    {% for skill, count in skills.items %}
    <li>{{ skill }} ({{ count }})</li>
    {% endfor %}
</ul>
{% endfor %}
{% endblock %}
